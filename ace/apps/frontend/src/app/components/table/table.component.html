<ng-content select="[emptyMessageDisplay]">
</ng-content>
<table mat-table [dataSource]="datasource">
  <ng-container *ngFor="let col of columns" [matColumnDef]="col.key">
    <th mat-header-cell *matHeaderCellDef>{{ col.display }}</th>
    <td mat-cell *matCellDef="let cell">
      @if (isObjectType(cell[col.key])) {
      <mat-accordion multi>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title> Details </mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container *ngFor="let items of cell[col.key]">
            <p *ngFor="let item of items | keyvalue">
              <b>{{ item.key }}</b> : {{ item.value }}
            </p>
          </ng-container>
        </mat-expansion-panel>
      </mat-accordion>
      } @else if (isBooleanType(cell[col.key])) { @if (cell[col.key]) {
      <mat-icon color="green"> check_circle </mat-icon>
      } @else {
      <mat-icon color="red"> cancel </mat-icon>
      } } @else {
      {{ cell[col.key] }}
      }
    </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Actions</th>
    <td mat-cell *matCellDef="let row">
      <ng-container
        *ngTemplateOutlet="actionTemplate; context: { $implicit: row }"
      ></ng-container>
    </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>

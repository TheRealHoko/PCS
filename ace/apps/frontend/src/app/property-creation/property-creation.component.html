<section class="flex justify-center items-start mt-16">
  <div class="bg-primary rounded-md w-1/2 p-5 max-w-md">
    <h1 class="text-secondary text-center text-2xl mb-5">Rent a property</h1>
    <form
      class="flex flex-col justify-center"
      [formGroup]="propertyForm"
      (ngSubmit)="onSubmit()">
      <mat-form-field appearance="fill">
        <mat-label>Name of the property</mat-label>
        <input
          matInput
          formControlName="name"
          name="name"
          placeholder="Enter the name of the property"
          type="text"
          required />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Description</mat-label>
        <textarea
          matInput
          formControlName="description"
          name="description"
          placeholder="Describe the property in a few words"
          required
        ></textarea>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Property type</mat-label>
        <mat-select 
        formControlName="propertyType"
        placeholder="(Ex. house, apartment, etc.)"
        required
        >
          @for (type of propTypes; track $index) {
            <mat-option [value]="type">{{ type | titlecase }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Price (€)</mat-label>
        <input
          matInput
          formControlName="price"
          name="price"
          placeholder="Define the price of the property per night"
          type="number"
          min="0"
          required
        />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Capacity</mat-label>
        <input
          matInput
          formControlName="capacity"
          name="capacity"
          placeholder="Number of people the property can accommodate"
          type="number"
          min="1"
          required
        />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Surface (m²)</mat-label>
        <input
          matInput
          formControlName="surface"
          name="surface"
          placeholder="Surface of the property in square meters"
          type="number"
          min="1"
          required
        />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Rooms</mat-label>
        <input
          matInput
          formControlName="roomCount"
          name="roomCount"
          placeholder="Number of rooms in the property"
          type="number"
          min="1"
          required
        />
      </mat-form-field>

      <!-- Upload example -->
      <ace-upload (uploadFiles)="getFiles($event)"></ace-upload>

      <mat-form-field>
        <mat-label>Enter a date range</mat-label>
        <mat-date-range-input  [min]="minDate" [max]="maxDate" [formGroup]="propertyForm" [rangePicker]="picker">
          <input matStartDate formControlName="from" placeholder="Start date">
          <input matEndDate formControlName="to" placeholder="End date">
        </mat-date-range-input>
        <mat-hint>DD/MM/YYYY - DD/MM/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>
      
        @if (propertyForm.controls['from'].hasError('matStartDateInvalid')) {
          <mat-error>Invalid start date</mat-error>
        }
        @if (propertyForm.controls['to'].hasError('matEndDateInvalid')) {
          <mat-error>Invalid end date</mat-error>
        }
      </mat-form-field>

      <button
        class="bg-tertiary"
        mat-raised-button
        [disabled]="propertyForm.invalid"
        type="submit"
      >
        Create the property
      </button>
    </form>
  </div>
</section>